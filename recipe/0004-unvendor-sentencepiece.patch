From e55f32ac68169b6d09dd6b2386c48d167d5269f4 Mon Sep 17 00:00:00 2001
From: Jack Olivieri <jolivieri@anaconda.com>
Date: Tue, 8 Oct 2024 11:56:00 +0200
Subject: [PATCH] unvendor sentencepiece

---
 fairseq2n/CMakeLists.txt                                       | 2 +-
 fairseq2n/src/fairseq2n/CMakeLists.txt                         | 2 ++
 fairseq2n/src/fairseq2n/data/text/sentencepiece/sp_processor.h | 2 +-
 3 files changed, 4 insertions(+), 2 deletions(-)

diff --git a/fairseq2n/CMakeLists.txt b/fairseq2n/CMakeLists.txt
index 18112406..2c17461c 100644
--- a/fairseq2n/CMakeLists.txt
+++ b/fairseq2n/CMakeLists.txt
@@ -194,7 +194,7 @@ fairseq2n_add_kaldi_native_fbank()
 
 fairseq2n_add_natsort()
 
-fairseq2n_add_sentencepiece()
+# fairseq2n_add_sentencepiece()
 
 fairseq2n_add_zip()
 
diff --git a/fairseq2n/src/fairseq2n/CMakeLists.txt b/fairseq2n/src/fairseq2n/CMakeLists.txt
index 8e959e9f..dc99d3d5 100644
--- a/fairseq2n/src/fairseq2n/CMakeLists.txt
+++ b/fairseq2n/src/fairseq2n/CMakeLists.txt
@@ -102,6 +102,8 @@ target_include_directories(fairseq2n ${system}
         $<BUILD_INTERFACE:${PROJECT_BINARY_DIR}/src>
 )
 
+target_include_directories(fairseq2n PRIVATE $ENV{PREFIX}/include)
+
 target_link_libraries(fairseq2n
     PRIVATE
         ${CMAKE_DL_LIBS}
diff --git a/fairseq2n/src/fairseq2n/data/text/sentencepiece/sp_processor.h b/fairseq2n/src/fairseq2n/data/text/sentencepiece/sp_processor.h
index 634ce8cb..bafd9deb 100644
--- a/fairseq2n/src/fairseq2n/data/text/sentencepiece/sp_processor.h
+++ b/fairseq2n/src/fairseq2n/data/text/sentencepiece/sp_processor.h
@@ -13,7 +13,7 @@
 #include <string_view>
 #include <vector>
 
-#include <sentencepiece/src/sentencepiece_processor.h>
+#include "sentencepiece_processor.h"
 
 #include "fairseq2n/data/text/sentencepiece/sp_model.h"
 
-- 
2.39.5 (Apple Git-154)

